### 小组实训报告（YOLOv3/YOLOv1 复现与工程化落地）

---

## 项目概述

- **目标**：复现 YOLOv3 与 YOLOv1 的训练与推理流程，构建一个可交付的桌面端目标检测应用（图像/视频/摄像头），并沉淀工程化方法与文档。
- **产出**：
  - 可运行的 PyQt5 UI（`项目源代码/本地代码仓库/ui`）
  - 模型加载与推理（支持 YOLOv3/YOLOv1，兼容 v5/v8）
  - 文档与脚本（README、测试报告、部署说明）

---

## 系统架构与模块划分

```
应用层（UI）
  ├─ main.py：应用入口/全局样式
  ├─ aiui.py：界面布局/控件样式
  ├─ aiwindow.py：业务逻辑（权重选择、推理调度、信号槽）
  └─ aicamera.py：摄像头/视频读取线程

模型层
  ├─ YOLOv3：hubconf.py 加载（本地优先）
  └─ YOLOv1：本地工程动态导入（NetModel/Utils/解码函数）

数据层
  ├─ 图像/视频文件（中文路径兼容）
  └─ 实时摄像头帧（DirectShow）
```

---

## 工程化实践与收获

- 依赖管理：

  - 使用根目录 `requirements.txt` 锁定核心包版本；
  - v8 单独提示安装 `ultralytics` 作为可选依赖；
  - 镜像源安装与虚拟环境隔离，减少冲突。
- 配置与可复现：

  - 路径/模型类型/推理参数集中在 `aiwindow.py`；
  - UI 提供“性能设置/阈值设置”，运行时可调；
  - 通过日志输出与图片序列保存，保留关键证据链。
- 稳定性与鲁棒性：

  - 深拷贝图像缓冲，避免临时内存释放导致崩溃；
  - 统一异常兜底，失败不阻塞主流程；
  - 关闭线程与资源回收（摄像头/视频/推理线程）显式化。
- 性能优化：

  - GPU/CPU 自适应分辨率与帧跳过；
  - 首帧“模型预热”降低卡顿；
  - UI 刷新节流，减少不必要重绘。

---

## 实验结果与验证

- 环境：Python 3.9 + PyTorch（CUDA 可用时使用 GPU），Windows 10。
- 数据：VOC 子集与自采样测试集。
- 指标（示例口径）：
  - YOLOv3：mAP@0.5 达到期望基线；1080p 视频在 GPU 上可实时（30 FPS 左右，随权重与显卡浮动）。
  - YOLOv1：在较小分辨率下达到可用精度，UI 可视化稳定，适合作为教学/原理对比基线。
- 功能验证：图像/视频/摄像头三种模式稳定运行，日志与保存功能正常。

注：具体数值已在《测试报告》中呈现，本文聚焦实现与工程经验。

---

## 问题与解决

- 依赖冲突/版本不兼容 → 建议固定 `torch/torchvision` 与 `PyQt5>=5.15`，分环境安装；
- 首帧延迟/画面闪烁 → 预热+线程化推理+刷新节流；
- 中文路径读写失败 → 统一 `imdecode/tofile` 方案；
- 显存溢出 → 降低 `infer_size`、提高 `frame_skip`、限制最小推理间隔。

---

## 小组分工与协作

- 徐思远（算法）：复现 YOLOv3/YOLOv1，整理训练配置与权重导出；
- 李铭昊（应用）：PyQt5 UI 设计与交互、推理线程与信号槽封装；
- 段景程 何玉欣（工程）：依赖/环境/脚本、日志与问题定位、README/部署说明；
- 评审机制：每周一次里程碑复盘，问题清单与负责人到人，拉通修复进度。

---

## 下一步计划

- 完善 YOLOv1/YOLOv3 训练脚本与评测脚本，补齐 mAP/PR 曲线自动化导出；
- 引入 ONNX/TensorRT 导出与推理，形成轻量部署链路；
- UI 新功能：批量离线处理、统计面板、结果导出报表；
- 建立最小可复现模板（环境/脚本/说明），沉淀为教学示例工程。








