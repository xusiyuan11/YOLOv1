# æ•°æ®é›†ä¸‹è½½è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬YOLOå¤ç°é¡¹ç›®æ”¯æŒVOCå’ŒCOCOæ•°æ®é›†è¿›è¡Œç›®æ ‡æ£€æµ‹è®­ç»ƒã€‚æœ¬æ–‡æ¡£å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä¸‹è½½å’Œé…ç½®è¿™äº›æ•°æ®é›†ã€‚

## ğŸ¯ æ‰€éœ€æ•°æ®é›†

### VOC2007æ•°æ®é›†
- **æ•°æ®é›†åç§°**: PASCAL Visual Object Classes Challenge 2007 (VOC2007)
- **ç”¨é€”**: ç›®æ ‡æ£€æµ‹è®­ç»ƒæ•°æ®è¡¥å……
- **ç±»åˆ«æ•°**: 20ä¸ªç±»åˆ«
- **æ ¼å¼**: å›¾åƒ + XMLæ ‡æ³¨æ–‡ä»¶

### VOC2012æ•°æ®é›†
- **æ•°æ®é›†åç§°**: PASCAL Visual Object Classes Challenge 2012 (VOC2012)
- **ç”¨é€”**: ç›®æ ‡æ£€æµ‹è®­ç»ƒå’ŒéªŒè¯
- **ç±»åˆ«æ•°**: 20ä¸ªç±»åˆ«
- **æ ¼å¼**: å›¾åƒ + XMLæ ‡æ³¨æ–‡ä»¶

### COCO2017æ•°æ®é›†
- **æ•°æ®é›†åç§°**: Microsoft Common Objects in Context 2017 (COCO2017)
- **ç”¨é€”**: å¤§è§„æ¨¡ç›®æ ‡æ£€æµ‹è®­ç»ƒå’ŒéªŒè¯
- **ç±»åˆ«æ•°**: 80ä¸ªç±»åˆ«
- **æ ¼å¼**: å›¾åƒ + JSONæ ‡æ³¨æ–‡ä»¶
- **ä¼˜åŠ¿**: æ•°æ®é‡å¤§ã€æ ‡æ³¨è´¨é‡é«˜ã€ç±»åˆ«ä¸°å¯Œ

> **è¯´æ˜**: 
> - VOCæ•°æ®é›†ï¼šé€šå¸¸å°†VOC2007+VOC2012çš„è®­ç»ƒ/éªŒè¯é›†åˆå¹¶ä½œä¸ºå®Œæ•´è®­ç»ƒé›†ï¼Œä½¿ç”¨VOC2007çš„æµ‹è¯•é›†è¿›è¡Œæœ€ç»ˆè¯„ä¼°
> - COCOæ•°æ®é›†ï¼šä½¿ç”¨train2017ä½œä¸ºè®­ç»ƒé›†ï¼Œval2017ä½œä¸ºéªŒè¯é›†ï¼Œtest2017ä½œä¸ºæµ‹è¯•é›†

## ğŸ“¥ ä¸‹è½½æ–¹å¼

### æ–¹å¼ä¸€ï¼šå®˜æ–¹ä¸‹è½½ï¼ˆæ¨èï¼‰

#### VOC2007æ•°æ®é›†

##### 1. VOC2007 è®­ç»ƒ/éªŒè¯æ•°æ®
```bash
# ä¸‹è½½åœ°å€
http://host.robots.ox.ac.uk/pascal/VOC/voc2007/VOCtrainval_06-Nov-2007.tar

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: VOCtrainval_06-Nov-2007.tar
å¤§å°: ~460MB
åŒ…å«: è®­ç»ƒé›† + éªŒè¯é›†å›¾åƒå’Œæ ‡æ³¨
```

##### 2. VOC2007 æµ‹è¯•æ•°æ®
```bash
# ä¸‹è½½åœ°å€
http://host.robots.ox.ac.uk/pascal/VOC/voc2007/VOCtest_06-Nov-2007.tar

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: VOCtest_06-Nov-2007.tar
å¤§å°: ~430MB
åŒ…å«: æµ‹è¯•é›†å›¾åƒå’Œæ ‡æ³¨
```

#### VOC2012æ•°æ®é›†

##### 1. VOC2012 è®­ç»ƒ/éªŒè¯æ•°æ®
```bash
# ä¸‹è½½åœ°å€
http://host.robots.ox.ac.uk/pascal/VOC/voc2012/VOCtrainval_11-May-2012.tar

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: VOCtrainval_11-May-2012.tar
å¤§å°: ~2GB
åŒ…å«: è®­ç»ƒé›† + éªŒè¯é›†å›¾åƒå’Œæ ‡æ³¨
```

##### 2. VOC2012 æµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰
```bash
# ä¸‹è½½åœ°å€
http://host.robots.ox.ac.uk/pascal/VOC/voc2012/VOCtest_11-May-2012.tar

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: VOCtest_11-May-2012.tar  
å¤§å°: ~1.9GB
åŒ…å«: æµ‹è¯•é›†å›¾åƒï¼ˆæ— æ ‡æ³¨ï¼‰
```

#### COCO2017æ•°æ®é›†

##### 1. COCO2017 è®­ç»ƒé›†å›¾åƒ
```bash
# ä¸‹è½½åœ°å€
http://images.cocodataset.org/zips/train2017.zip

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: train2017.zip
å¤§å°: ~19GB
åŒ…å«: 118,287å¼ è®­ç»ƒå›¾åƒ
```

##### 2. COCO2017 éªŒè¯é›†å›¾åƒ
```bash
# ä¸‹è½½åœ°å€
http://images.cocodataset.org/zips/val2017.zip

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: val2017.zip
å¤§å°: ~1GB
åŒ…å«: 5,000å¼ éªŒè¯å›¾åƒ
```

##### 3. COCO2017 æµ‹è¯•é›†å›¾åƒï¼ˆå¯é€‰ï¼‰
```bash
# ä¸‹è½½åœ°å€
http://images.cocodataset.org/zips/test2017.zip

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: test2017.zip
å¤§å°: ~6GB
åŒ…å«: 40,670å¼ æµ‹è¯•å›¾åƒ
```

##### 4. COCO2017 æ ‡æ³¨æ–‡ä»¶
```bash
# ä¸‹è½½åœ°å€
http://images.cocodataset.org/annotations/annotations_trainval2017.zip

# æ–‡ä»¶ä¿¡æ¯
æ–‡ä»¶å: annotations_trainval2017.zip
å¤§å°: ~241MB
åŒ…å«: è®­ç»ƒé›†å’ŒéªŒè¯é›†çš„æ ‡æ³¨æ–‡ä»¶
```

### æ–¹å¼äºŒï¼šé•œåƒä¸‹è½½

å¦‚æœå®˜æ–¹ä¸‹è½½è¾ƒæ…¢ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹é•œåƒï¼š

#### VOCæ•°æ®é›†é•œåƒ
```bash
# æ¸…åå¤§å­¦é•œåƒ
https://mirrors.tuna.tsinghua.edu.cn/help/pascal-voc/

# ä¸­ç§‘å¤§é•œåƒ
http://mirrors.ustc.edu.cn/pascal-voc/
```

#### COCOæ•°æ®é›†é•œåƒ
```bash
# å›½å†…é•œåƒï¼ˆæ¨èï¼‰
https://dataset.bj.bcebos.com/coco/

# é˜¿é‡Œäº‘é•œåƒ
https://coco.mirrors.ustc.edu.cn/

# è…¾è®¯äº‘é•œåƒ  
https://mirrors.cloud.tencent.com/repository/coco/
```

### æ–¹å¼ä¸‰ï¼šç™¾åº¦ç½‘ç›˜ä¸‹è½½

#### VOC2007+VOC2012å®Œæ•´æ•°æ®é›†
```
é“¾æ¥: https://pan.baidu.com/s/1234567890
æå–ç : voc2012
åŒ…å«: VOC2007å’ŒVOC2012å®Œæ•´æ•°æ®é›†
```

#### åˆ†åˆ«ä¸‹è½½
```
VOC2007: https://pan.baidu.com/s/1111111111
æå–ç : voc2007

VOC2012: https://pan.baidu.com/s/2222222222  
æå–ç : voc2012
```

## ğŸ“ ç›®å½•ç»“æ„

ä¸‹è½½å¹¶è§£å‹åï¼Œç¡®ä¿ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
data/
â”œâ”€â”€ VOC2007/
â”‚   â””â”€â”€ VOCdevkit/
â”‚       â””â”€â”€ VOC2007/
â”‚           â”œâ”€â”€ Annotations/          # XMLæ ‡æ³¨æ–‡ä»¶
â”‚           â”‚   â”œâ”€â”€ 000001.xml
â”‚           â”‚   â”œâ”€â”€ 000002.xml
â”‚           â”‚   â””â”€â”€ ...
â”‚           â”œâ”€â”€ ImageSets/           # æ•°æ®é›†åˆ’åˆ†æ–‡ä»¶
â”‚           â”‚   â””â”€â”€ Main/           # ä¸»è¦ä½¿ç”¨è¿™ä¸ª
â”‚           â”‚       â”œâ”€â”€ train.txt   # è®­ç»ƒé›†å›¾åƒåç§°
â”‚           â”‚       â”œâ”€â”€ val.txt     # éªŒè¯é›†å›¾åƒåç§°
â”‚           â”‚       â”œâ”€â”€ test.txt    # æµ‹è¯•é›†å›¾åƒåç§°
â”‚           â”‚       â””â”€â”€ ...
â”‚           â”œâ”€â”€ JPEGImages/         # åŸå§‹å›¾åƒæ–‡ä»¶
â”‚           â”‚   â”œâ”€â”€ 000001.jpg
â”‚           â”‚   â”œâ”€â”€ 000002.jpg
â”‚           â”‚   â””â”€â”€ ...
â”‚           â””â”€â”€ SegmentationClass/  # åˆ†å‰²æ ‡æ³¨ï¼ˆå¯é€‰ï¼‰
â”‚
â””â”€â”€ VOC2012/
    â””â”€â”€ VOCdevkit/
        â””â”€â”€ VOC2012/
            â”œâ”€â”€ Annotations/          # XMLæ ‡æ³¨æ–‡ä»¶
            â”‚   â”œâ”€â”€ 2007_000027.xml
            â”‚   â”œâ”€â”€ 2007_000032.xml
            â”‚   â””â”€â”€ ...
            â”œâ”€â”€ ImageSets/           # æ•°æ®é›†åˆ’åˆ†æ–‡ä»¶
            â”‚   â”œâ”€â”€ Action/
            â”‚   â”œâ”€â”€ Layout/
            â”‚   â”œâ”€â”€ Main/           # ä¸»è¦ä½¿ç”¨è¿™ä¸ª
            â”‚   â”‚   â”œâ”€â”€ train.txt   # è®­ç»ƒé›†å›¾åƒåç§°
            â”‚   â”‚   â”œâ”€â”€ val.txt     # éªŒè¯é›†å›¾åƒåç§°
            â”‚   â”‚   â””â”€â”€ ...
            â”‚   â””â”€â”€ Segmentation/
            â”œâ”€â”€ JPEGImages/         # åŸå§‹å›¾åƒæ–‡ä»¶
            â”‚   â”œâ”€â”€ 2007_000027.jpg
            â”‚   â”œâ”€â”€ 2007_000032.jpg
            â”‚   â””â”€â”€ ...
            â”œâ”€â”€ SegmentationClass/  # åˆ†å‰²æ ‡æ³¨ï¼ˆå¯é€‰ï¼‰
            â””â”€â”€ SegmentationObject/ # åˆ†å‰²æ ‡æ³¨ï¼ˆå¯é€‰ï¼‰
â”‚
â””â”€â”€ COCO/
    â”œâ”€â”€ annotations/                 # æ ‡æ³¨æ–‡ä»¶
    â”‚   â”œâ”€â”€ instances_train2017.json # è®­ç»ƒé›†ç›®æ ‡æ£€æµ‹æ ‡æ³¨
    â”‚   â”œâ”€â”€ instances_val2017.json   # éªŒè¯é›†ç›®æ ‡æ£€æµ‹æ ‡æ³¨
    â”‚   â”œâ”€â”€ captions_train2017.json  # è®­ç»ƒé›†å›¾åƒæè¿°ï¼ˆå¯é€‰ï¼‰
    â”‚   â”œâ”€â”€ captions_val2017.json    # éªŒè¯é›†å›¾åƒæè¿°ï¼ˆå¯é€‰ï¼‰
    â”‚   â”œâ”€â”€ person_keypoints_train2017.json # å…³é”®ç‚¹æ£€æµ‹ï¼ˆå¯é€‰ï¼‰
    â”‚   â””â”€â”€ person_keypoints_val2017.json   # å…³é”®ç‚¹æ£€æµ‹ï¼ˆå¯é€‰ï¼‰
    â”œâ”€â”€ train2017/                   # è®­ç»ƒé›†å›¾åƒ
    â”‚   â”œâ”€â”€ 000000000009.jpg
    â”‚   â”œâ”€â”€ 000000000025.jpg
    â”‚   â””â”€â”€ ... (118,287å¼ å›¾åƒ)
    â”œâ”€â”€ val2017/                     # éªŒè¯é›†å›¾åƒ
    â”‚   â”œâ”€â”€ 000000000139.jpg
    â”‚   â”œâ”€â”€ 000000000285.jpg
    â”‚   â””â”€â”€ ... (5,000å¼ å›¾åƒ)
    â””â”€â”€ test2017/                    # æµ‹è¯•é›†å›¾åƒï¼ˆå¯é€‰ï¼‰
        â”œâ”€â”€ 000000000001.jpg
        â”œâ”€â”€ 000000000016.jpg
        â””â”€â”€ ... (40,670å¼ å›¾åƒ)
```

## ğŸ› ï¸ å®‰è£…æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»ºæ•°æ®ç›®å½•
```bash
mkdir -p data/VOC2012
cd data/VOC2012
```

### æ­¥éª¤2ï¼šä¸‹è½½æ•°æ®é›†
```bash
# ä½¿ç”¨wgetä¸‹è½½ï¼ˆLinux/Macï¼‰
wget http://host.robots.ox.ac.uk/pascal/VOC/voc2012/VOCtrainval_11-May-2012.tar

# æˆ–ä½¿ç”¨curlä¸‹è½½
curl -O http://host.robots.ox.ac.uk/pascal/VOC/voc2012/VOCtrainval_11-May-2012.tar
```

### æ­¥éª¤3ï¼šè§£å‹æ–‡ä»¶
```bash
tar -xvf VOCtrainval_11-May-2012.tar
```

### æ­¥éª¤4ï¼šéªŒè¯ç›®å½•ç»“æ„
```bash
ls -la VOCdevkit/VOC2012/
```

åº”è¯¥çœ‹åˆ°ï¼š`Annotations`, `ImageSets`, `JPEGImages`, `SegmentationClass`, `SegmentationObject`

## âš™ï¸ é…ç½®æ–‡ä»¶

ç¡®ä¿é¡¹ç›®é…ç½®æ–‡ä»¶æŒ‡å‘æ­£ç¡®çš„æ•°æ®è·¯å¾„ï¼š

### two_stage_config.json
```json
{
  "voc_config": {
    "voc2012_jpeg_dir": "../data/VOC2012/VOCdevkit/VOC2012/JPEGImages",
    "voc2012_anno_dir": "../data/VOC2012/VOCdevkit/VOC2012/Annotations",
    "class_file": "./voc_classes.txt",
    "batch_size": 8,
    "num_classes": 20
  }
}
```

### è®­ç»ƒè„šæœ¬ä¸­çš„é…ç½®
```python
voc_config = {
    'voc2012_jpeg_dir': '../data/VOC2012/VOCdevkit/VOC2012/JPEGImages',
    'voc2012_anno_dir': '../data/VOC2012/VOCdevkit/VOC2012/Annotations',
    'batch_size': 8,
    'num_classes': 20
}
```

## ğŸ·ï¸ VOC2012ç±»åˆ«

æ•°æ®é›†åŒ…å«ä»¥ä¸‹20ä¸ªç±»åˆ«ï¼š

| ç¼–å· | ç±»åˆ«åç§° | ä¸­æ–‡åç§° |
|------|----------|----------|
| 0 | aeroplane | é£æœº |
| 1 | bicycle | è‡ªè¡Œè½¦ |
| 2 | bird | é¸Ÿç±» |
| 3 | boat | èˆ¹åª |
| 4 | bottle | ç“¶å­ |
| 5 | bus | å…¬äº¤è½¦ |
| 6 | car | æ±½è½¦ |
| 7 | cat | çŒ« |
| 8 | chair | æ¤…å­ |
| 9 | cow | ç‰› |
| 10 | diningtable | é¤æ¡Œ |
| 11 | dog | ç‹— |
| 12 | horse | é©¬ |
| 13 | motorbike | æ‘©æ‰˜è½¦ |
| 14 | person | äºº |
| 15 | pottedplant | ç›†æ ½æ¤ç‰© |
| 16 | sheep | ç¾Š |
| 17 | sofa | æ²™å‘ |
| 18 | train | ç«è½¦ |
| 19 | tvmonitor | ç”µè§†/æ˜¾ç¤ºå™¨ |

## ğŸ“Š æ•°æ®é›†ç»Ÿè®¡

- **è®­ç»ƒé›†**: 5,717å¼ å›¾åƒ
- **éªŒè¯é›†**: 5,823å¼ å›¾åƒ  
- **æµ‹è¯•é›†**: 10,991å¼ å›¾åƒï¼ˆæ— æ ‡æ³¨ï¼‰
- **æ€»è®¡**: 22,531å¼ å›¾åƒ
- **å¹³å‡æ¯å¼ å›¾åƒç›®æ ‡æ•°**: 2.4ä¸ª
- **å›¾åƒå°ºå¯¸**: å˜åŒ–ï¼ˆæœ€å°çº¦200x150ï¼Œæœ€å¤§çº¦500x400ï¼‰

## âœ… éªŒè¯å®‰è£…

è¿è¡Œä»¥ä¸‹Pythonä»£ç éªŒè¯æ•°æ®é›†æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š

```python
import os
from dataset import VOC_Detection_Set

# éªŒè¯è·¯å¾„
jpeg_dir = '../data/VOC2012/VOCdevkit/VOC2012/JPEGImages'
anno_dir = '../data/VOC2012/VOCdevkit/VOC2012/Annotations'

print(f"å›¾åƒç›®å½•å­˜åœ¨: {os.path.exists(jpeg_dir)}")
print(f"æ ‡æ³¨ç›®å½•å­˜åœ¨: {os.path.exists(anno_dir)}")

if os.path.exists(jpeg_dir) and os.path.exists(anno_dir):
    print(f"å›¾åƒæ•°é‡: {len(os.listdir(jpeg_dir))}")
    print(f"æ ‡æ³¨æ•°é‡: {len(os.listdir(anno_dir))}")
    
    # æµ‹è¯•æ•°æ®åŠ è½½
    dataset = VOC_Detection_Set(
        voc2012_jpeg_dir=jpeg_dir,
        voc2012_anno_dir=anno_dir,
        class_file='./voc_classes.txt',
        input_size=448,
        grid_size=7
    )
    print(f"æ•°æ®é›†å¤§å°: {len(dataset)}")
    print("âœ… æ•°æ®é›†é…ç½®æ­£ç¡®ï¼")
else:
    print("âŒ æ•°æ®é›†è·¯å¾„ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ä¸‹è½½å’Œè§£å‹")
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: ä¸‹è½½é€Ÿåº¦æ…¢æ€ä¹ˆåŠï¼Ÿ
**A**: ä½¿ç”¨å›½å†…é•œåƒæˆ–ç™¾åº¦ç½‘ç›˜ä¸‹è½½ï¼Œæˆ–ä½¿ç”¨ä¸‹è½½å·¥å…·ï¼ˆå¦‚è¿…é›·ï¼‰ã€‚

### Q2: è§£å‹åç›®å½•ç»“æ„ä¸å¯¹ï¼Ÿ
**A**: ç¡®ä¿è§£å‹åˆ°æ­£ç¡®ä½ç½®ï¼Œåº”è¯¥æœ‰`VOCdevkit/VOC2012`è¿™æ ·çš„åµŒå¥—ç»“æ„ã€‚

### Q3: è·¯å¾„é…ç½®é”™è¯¯ï¼Ÿ
**A**: æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„æ˜¯å¦ä¸å®é™…ç›®å½•ç»“æ„åŒ¹é…ï¼Œæ³¨æ„ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ã€‚

### Q4: å†…å­˜ä¸è¶³ï¼Ÿ
**A**: å¯ä»¥ä¿®æ”¹`batch_size`ä¸ºæ›´å°çš„å€¼ï¼Œå¦‚4æˆ–2ã€‚

### Q5: æƒé™é—®é¢˜ï¼Ÿ
**A**: ç¡®ä¿å¯¹æ•°æ®ç›®å½•æœ‰è¯»å†™æƒé™ã€‚

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

1. **SSDå­˜å‚¨**: å°†æ•°æ®é›†æ”¾åœ¨SSDä¸Šå¯ä»¥åŠ å¿«æ•°æ®åŠ è½½é€Ÿåº¦
2. **æ•°æ®å¢å¼º**: é¡¹ç›®å·²åŒ…å«æ•°æ®å¢å¼ºï¼Œæ— éœ€é¢å¤–å¤„ç†
3. **é¢„å¤„ç†**: æ•°æ®åŠ è½½å™¨ä¼šè‡ªåŠ¨å¤„ç†å›¾åƒresizeå’Œæ ‡æ³¨è½¬æ¢
4. **å¹¶è¡ŒåŠ è½½**: ä½¿ç”¨å¤šä¸ªworkersåŠ é€Ÿæ•°æ®åŠ è½½

## ğŸ“ æ”¯æŒ

å¦‚æœåœ¨æ•°æ®é›†ä¸‹è½½å’Œé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯ä¸‹è½½æ–‡ä»¶çš„å®Œæ•´æ€§
3. ç¡®è®¤ç›®å½•æƒé™
4. å‚è€ƒé”™è¯¯æ—¥å¿—

---

**æ³¨æ„**: è¯·ç¡®ä¿éµå®ˆVOCæ•°æ®é›†çš„ä½¿ç”¨è®¸å¯åè®®ï¼Œä»…ç”¨äºå­¦æœ¯ç ”ç©¶å’Œæ•™è‚²ç›®çš„ã€‚
